<% content_for :title do %>Welcome to Yarii<% end %>

<%= form_with model: @site, url: sites_path, method: :post, local: true do |f| %>

  <div class="content">
    <% if @user %>
      <p>It looks like this is your first time setting up the Yarii editor app. Let's get you started.</p>
    <% end %>

    <p>First, you need to add your site's basic details and local install paths.</p>
  </div>

  <div class="field">
    <%= f.label :title, "Name of Your Site", class: 'label' %>
    <div class="control">
      <%= f.text_field :title, class: 'input', placeholder: "My Awesome Site", required: true %>
    </div>
  </div>

  <div class="field">
    <%= f.label :git_repo_path, "Full Path to Git Repo", class: 'label' %>
    <div class="control">
      <%= f.text_field :git_repo_path, class: 'input', placeholder: "/Users/me/sites/my_awesome_site", required: true %>
    </div>
  </div>

  <div class="field">
    <%= f.label :content_base_path, "Content Folder in Git Repo", class: 'label'  %>
    <div class="control">
      <%= f.text_field :content_base_path, class: 'input', placeholder: "src", required: true %>
    </div>
  </div>

  <div class="content mt-10">
    <p>Now, what will be the URLs for the preview site as well as final public site?</p>
  </div>

  <div class="field">
    <%= f.label :preview_base_url, "Preview Site URL", class: 'label' %>
    <div class="control">
      <%= f.text_field :preview_base_url, class: 'input', placeholder: "https://preview.domain.com", required: true %>
    </div>
  </div>

  <div class="field">
    <%= f.label :published_base_url, "Public Site URL", class: 'label' %>
    <div class="control">
      <%= f.text_field :published_base_url, class: 'input', placeholder: "https://www.domain.com", required: true %>
    </div>
  </div>

  <div class="content mt-10">
    <p>What is the build command you use for generating preview content? For example, for Bridgetown it would likely be:<br/><code>bundle exec bridgetown build --unpublished --future</code></p>
  </div>

  <div class="field">
    <%= f.label :preview_build_command, "Build Command", class: 'label' %>
    <div class="control">
      <%= f.text_field :preview_build_command, class: 'input', placeholder: "bundle exec â€¦", required: true %>
    </div>
  </div>

  <% if @user %>
    <div class="content mt-10">
      <p>Finally, let's create your first admin user account.</p>
    </div>

    <%= fields_for @user do |uf| %>
      <div class="field">
        <%= uf.label :name, class: 'label' %>
        <div class="control">
          <%= uf.text_field :name, class: 'input', required: true %>
        </div>
      </div>
      <div class="field">
        <%= uf.label :email, class: 'label' %>
        <div class="control">
          <%= uf.text_field :email, class: 'input', required: true %>
        </div>
      </div>
      <div class="field">
        <%= uf.label :password, class: 'label' %>
        <div class="control">
          <%= uf.password_field :password, class: 'input', required: true %>
        </div>
      </div>
    <% end %>    
  <% end %>

  <div class="actions mt-12">
    <div class="control has-text-centered">
      <%= f.submit "Complete Site Setup", class: 'button is-medium is-link' %>
    </div>
  </div>
<% end %>
